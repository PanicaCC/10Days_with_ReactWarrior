(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(23)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(7),o=a.n(l),c=a(1),s=a(2),r=a(4),m=a(3),u=a(5),v=function(e){function t(){return Object(c.a)(this,t),Object(r.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Layout"},i.a.createElement("main",null,i.a.createElement("div",{className:"container"},this.props.children)))}}]),t}(n.Component),p=a(8);a(15),a(16),a(17);function d(e){return i.a.createElement("img",{width:"100%",src:e.src,alt:e.alt})}var h=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(m.a)(t).call(this,e))).ToggleOverviewHandler=function(){a.setState({show:!a.state.show})},a.ToggleLikeHandler=function(){a.setState({like:!a.state.like})},a.state={show:!1,like:!1,willWatch:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("li",{className:" movieCard "},i.a.createElement(d,{src:"https://image.tmdb.org/t/p/w500".concat(this.props.movie.backdrop_path||this.props.movie.poster_path),alt:this.props.movie.title}),i.a.createElement("div",{className:"movieCard__content"},i.a.createElement("p",null,this.props.movie.title),i.a.createElement("div",{className:"movieCard__rank"},i.a.createElement("span",null,"Rating - ",i.a.createElement("b",null,this.props.movie.vote_average)),i.a.createElement("button",{type:"button",className:"LikeButton ".concat(this.state.like?"LikeButton__success":" "),onClick:this.ToggleLikeHandler},"Like")),i.a.createElement("div",{className:""},this.state.willWatch?i.a.createElement("button",{type:"button",className:"WillWatchButton remove",onClick:function(){e.setState({willWatch:!1}),e.props.removeWillWatch(e.props.movie)}},"Remove Will Watch"):i.a.createElement("button",{type:"button",className:"WillWatchButton",onClick:function(){e.setState({willWatch:!0}),e.props.addWillWatch(e.props.movie)}},"Add will watch")),i.a.createElement("div",{className:"mt-4"},i.a.createElement("button",{type:"button",className:"RemoveMovie",onClick:this.props.removeMovies.bind(this,this.props.movie)},"Remove movie"),i.a.createElement("button",{type:"button",className:"btn btn-success w-100 mt-2",onClick:this.ToggleOverviewHandler},this.state.show?"Close overview":"Open overview")),i.a.createElement("p",null,this.state.show?this.props.movie.overview:null)))}}]),t}(i.a.Component),f=function(e){return i.a.createElement("ul",{className:"MovieList"},e.moviesData.map(function(t){return i.a.createElement(h,{key:t.id,movie:t,removeMovies:e.removeMovies,addWillWatch:e.addWillWatch,removeWillWatch:e.removeWillWatch})}))},g=(a(18),function(e){return i.a.createElement("div",{className:"WillWatch"},i.a.createElement("ul",null,e.WillWatchList.map(function(e){return i.a.createElement("li",{key:e.id},e.original_title)})))}),b=(a(19),[["popularity.desc","Most popular"],["release_date.desc","Release date"],["vote_average.desc","Vote average"]]),E=function(e){return i.a.createElement("ul",{className:"nav nav-pills nav-fill"},b.map(function(t,a){return i.a.createElement("li",{key:a,className:"nav-item"},i.a.createElement("button",{type:"button",className:"nav-link ".concat(e.sort===b[a][0]?"active":""),onClick:e.updateSortBy.bind(void 0,b[a][0])},b[a][1]))}))},W=(a(20),function(e){return i.a.createElement("div",{className:"PaginationMovie d-flex justify-content-between"},i.a.createElement("div",{className:"PaginationMovie__buttons"},i.a.createElement("button",{type:"button",onClick:function(){return e.prevPage()}},"Prev"),i.a.createElement("button",{className:"ml-2",type:"button",onClick:function(){return e.nextPage()}},"Next")),i.a.createElement("span",null,i.a.createElement("b",null,e.pages," of ",e.total_pages)))}),w="4173b7e14337bf6b8646c5299735bacf",_="https://api.themoviedb.org/3/",k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(m.a)(t).call(this,e))).getMovies=function(){fetch("".concat(_,"discover/movie?api_key=").concat(w,"&sort_by=").concat(a.state.sort,"&page=").concat(a.state.page_num)).then(function(e){return e.json()}).then(function(e){a.setState({isLoaded:!0,movies:e.results,total_pages:e.total_pages,page_num:e.page})},function(e){a.setState({isLoaded:!0,error:e})})},a.addWillWatchHandler=function(e){var t=Object(p.a)(a.state.willWatchArr);t.some(function(t){return t.id===e.id})||t.push(e),a.setState({willWatchArr:t})},a.removeWillWatchHandler=function(e){var t=a.state.willWatchArr.filter(function(t){return t.id!==e.id});a.setState({willWatchArr:t})},a.removeMoviesHandler=function(e){var t=a.state.movies.filter(function(t){return t.id!==e.id});a.setState({movies:t})},a.updateSortBy=function(e){a.setState({sort:e})},a.prevPageHandler=function(){a.state.page_num>1&&a.setState({page_num:a.state.page_num-=1},function(){a.getMovies()})},a.nextPageHandler=function(){a.state.page_num<a.state.total_pages&&a.setState({page_num:a.state.page_num+=1},function(){a.getMovies()})},a.state={total_pages:null,page_num:1,isLoaded:!1,movies:[],willWatchArr:[],sort:"popularity.desc"},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getMovies()}},{key:"componentDidUpdate",value:function(e,t,a){t.sort!==this.state.sort&&this.getMovies()}},{key:"render",value:function(){return i.a.createElement("div",{className:"Movie"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"Movie__header"},i.a.createElement("div",{className:"col-9"},i.a.createElement(E,{sort:this.state.sort,updateSortBy:this.updateSortBy})),i.a.createElement("div",{className:"col-3 text-right"},i.a.createElement("span",{className:"w-100"},"Will watch - ",this.state.willWatchArr.length))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-9"},i.a.createElement(f,{moviesData:this.state.movies,removeMovies:this.removeMoviesHandler,addWillWatch:this.addWillWatchHandler,removeWillWatch:this.removeWillWatchHandler}),i.a.createElement(W,{pages:this.state.page_num,total_pages:this.state.total_pages,prevPage:this.prevPageHandler,nextPage:this.nextPageHandler})),i.a.createElement("div",{className:"col-3"},i.a.createElement(g,{WillWatchList:this.state.willWatchArr}))))}}]),t}(n.Component),N=(a(21),function(e){function t(){return Object(c.a)(this,t),Object(r.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(v,null,i.a.createElement("h1",null,"Movie Catalog"),i.a.createElement(k,null))}}]),t}(n.Component));a(22);o.a.render(i.a.createElement(N,null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.f7735e4b.chunk.js.map